<p></p>
<div id="div" style="position:absolute;top:0;left:0;width:50px;height:50px;background:#000;"></div>
<button id="btn">做完再做一次动画</button>
<script src="jquery.js"></script>
<script>
$(function() {
	
	var $div = $("#div");
	var $btn = $("#btn");
	
	function animate() {
		var left = Math.floor(Math.random() * $(document).width()); 
		var top = Math.floor(Math.random() * $(document).height()); 
		$div.animate({
			left : left , 
			top : top
		} , 5*1000);
	}
	function showInfo(msg) {
		$('p').append(msg + '<br />');
	}
	$btn.click(function() {
		if($div.is(":animated")) {
			showInfo('当前在做动画，添加个回调');
			$div.promise().then(function() {
				showInfo('回调触发，动画完成');
			});
		} else {
			showInfo('当前不在做动画！再做一个动画吧！');
			animate();
		}
	});
});
</script>